# Template file for 'libtatsu'
pkgname=libtatsu
version=1.0.5
revision=1
build_style=gnu-configure
hostmakedepends="automake libtool pkgconf"
makedepends="libplist-devel libcurl-devel"
short_desc="Library handling the communication with Apple's Tatsu Signing Server"
maintainer="al20ov <nicolas.antauf@gmail.com>"
license="LGPL-2.1-only"
homepage="https://libimobiledevice.org"
changelog="https://raw.githubusercontent.com/libimobiledevice/libtatsu/master/NEWS"
distfiles="https://github.com/libimobiledevice/libtatsu/archive/refs/tags/${version}.tar.gz"
checksum=d98e973747b3a03c1befb1875fa43b1a109b1b332ae2252d8d471b4cfb91df6d

pre_configure() {
	echo $version > .tarball-version
	autoreconf -fi
}

libtatsu-devel_package() {
	short_desc+=" - development files"
	depends="${makedepends} ${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/*.a
		vmove usr/lib/*.so
		vmove usr/lib/pkgconfig
	}
}
